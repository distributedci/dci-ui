<div class="container-fluid">
  <div class="row" ng-if="$ctrl.jobs.isFetching">
    <div class="col-xs-12">
      <dci-loading></dci-loading>
    </div>
  </div>
  <div class="row" ng-hide="$ctrl.jobs.isFetching">
    <div class="col-sm-8 col-md-9" style="min-height:90vh">
      <div class="page-header">
        <div class="actions pull-right">
          <a href="#" ng-click="$ctrl.reloadPage()">
            <span class="pficon pficon-refresh"></span> Refresh Results
          </a>
        </div>
        <h1>Dashboard</h1>
      </div>
      <div class="list-group list-view-pf list-view-pf-view">
        <job-summary job="job" ng-repeat="job in $ctrl.jobs.items | filter:$ctrl.search"></job-summary>
      </div>
    </div>
    <div class="col-sm-4 col-md-3 sidebar-pf sidebar-pf-right" style="min-height:90vh; height:100%">
      <div class="sidebar-header sidebar-header-bleed-left sidebar-header-bleed-right">
        <div class="actions pull-right">
          <button type="button" class="btn btn-link" ng-click="$ctrl.search=''">Clear filters</button>
        </div>
        <h2 class="h5">Quick search</h2>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <input type="search"
                   class="form-control"
                   placeholder="Search job name or remoteci"
                   ng-model="$ctrl.search">
          </div>
        </div>
      </div>
      <div class="sidebar-header sidebar-header-bleed-left sidebar-header-bleed-right">
        <h2 class="h5">Status</h2>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="btn-toolbar" role="toolbar">
              <div class="btn-group" role="group" ng-click="$ctrl.search='success'">
                <button type="button" class="btn btn-success">
                  <i class="fa fa-check-circle"></i>
                  Success
                </button>
              </div>
              <div class="btn-group" role="group" ng-click="$ctrl.search='failure'">
                <button type="button" class="btn btn-danger">
                  <i class="fa fa-exclamation-circle"></i>
                  Failure
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="sidebar-header sidebar-header-bleed-left sidebar-header-bleed-right">
        <h2 class="h5">Remote ci</h2>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <div class="btn-toolbar" role="toolbar">
              <div class="btn-group" role="group"
                   ng-repeat="remoteci in $ctrl.remotecis.items | orderBy:'-updated_at'"
                   ng-click="$ctrl.search=remoteci.name"
                   ng-if="remoteci.state==='active'">
                <button type="button" class="btn btn-default mb-3">
                  {{remoteci.name}}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
