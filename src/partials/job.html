<div class="job">
  <h1 class="page-header">Job</h1>
  <div dci-job></div>
  <div tabset>
    <div tab heading="Files">

      <div ng-repeat="jobstate in job.jobstates" class="row" ng-class="jobstate.statusClass">
        <div class="col-md-12">
          <h4>
            <span class="title">
              {{ jobstate.status }}
            </span>
            <small>
              : {{ jobstate.comment }}
            </small>
            <small class="pull-right">{{ jobstate.updated_at }}</small>
          </h4>
        </div>
        <div class="col-md-12" ng-if="jobstate.files.length">
          <button type="button" class="btn btn-primary btn-xs pull-right"
             ng-click="jobstate.isOpen = !jobstate.isOpen">
            <span ng-if="!jobstate.isOpen">
              see details
            </span>
            <span ng-if="jobstate.isOpen">
              close details
            </span>
          </button>
        </div>
        <div class="col-md-12">
        <hr>
        </div>
        <div collapse="!jobstate.isOpen" class="col-md-12">
          <div class="tile tile-file" ng-repeat="file in jobstate.files">
            <h5>{{file.name}}</h5>
            <pre>{{file.content}}</pre>
          </div>

        </div>
      </div>

    </div>
    <div tab heading="Details">
      <div class="row">
        <div class="col-md-6">
          <h4>{{ job.remoteci.name }} <small>remote ci</small></h4>
          <hr>
          <table class="table table-striped">
            <tr><th>id</th><td>{{ job.remoteci.id }}</td></tr>
            <tr><th>created at</th><td>{{ job.remoteci.created_at }}</td></tr>
            <tr><th>updated at</th><td>{{ job.remoteci.updated_at }}</td></tr>
            <tr>
              <th>data</th>
              <td class="col-md-10"><div json-formatter json="job.remoteci.data" open="1"></div></td>
            </tr>
          </table>
        </div>
        <div class="col-md-6">
          <h4>{{ job.jobdefinition.name }} <small>job definition</small></h4>
          <hr>
          <table class="table table-striped">
            <tr><th>id</th><td>{{ job.jobdefinition.id }}</td></tr>
            <tr><th>priority</th><td>{{ job.jobdefinition.priority }}</td></tr>
            <tr><th>created at</th><td>{{ job.jobdefinition.created_at }}</td></tr>
            <tr><th>updated at</th><td>{{ job.jobdefinition.updated_at }}</td></tr>
          </table>
        </div>
        <div class="col-md-6">
          <h4>{{ job.jobdefinition.test.name }} <small>test</small></h4>
          <hr>
          <table class="table table-striped">
            <tr><th>id</th><td>{{ job.jobdefinition.test.id }}</td></tr>
            <tr><th>created at</th><td>{{ job.jobdefinition.test.created_at }}</td></tr>
            <tr><th>updated at</th><td>{{ job.jobdefinition.test.updated_at }}</td></tr>
            <tr><th>data</th>
              <td class="col-md-10">
                <div json-formatter json="job.jobdefinition.test.data" open="1"></div>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6" ng-repeat="component in components">
          <h4>{{ component.name }} <small>component</small></h4>
          <hr>
          <table class="table table-striped">
            <tr><th>id</th><td>{{ component.id }}</td></tr>
            <tr><th>type</th><td>{{ component.type }}</td></tr>
            <tr><th>created at</th><td>{{ component.created_at }}</td></tr>
            <tr><th>updated at</th><td>{{ component.updated_at }}</td></tr>
            <tr>
              <th>data</th>
              <td class="col-md-10"><div json-formatter json="component.data" open="1"></div></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
